(function(t){function e(e){for(var s,n,r=e[0],c=e[1],l=e[2],d=0,u=[];d<r.length;d++)n=r[d],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&u.push(o[n][0]),o[n]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);p&&p(e);while(u.length)u.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],s=!0,n=1;n<a.length;n++){var r=a[n];0!==o[r]&&(s=!1)}s&&(i.splice(e--,1),t=c(c.s=a[0]))}return t}var s={},n={app:0},o={app:0},i=[];function r(t){return c.p+"js/"+({about:"about"}[t]||t)+"."+{about:"bcc3b410"}[t]+".js"}function c(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(t){var e=[],a={about:1};n[t]?e.push(n[t]):0!==n[t]&&a[t]&&e.push(n[t]=new Promise((function(e,a){for(var s="css/"+({about:"about"}[t]||t)+"."+{about:"47dd1ed6"}[t]+".css",o=c.p+s,i=document.getElementsByTagName("link"),r=0;r<i.length;r++){var l=i[r],d=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(d===s||d===o))return e()}var u=document.getElementsByTagName("style");for(r=0;r<u.length;r++){l=u[r],d=l.getAttribute("data-href");if(d===s||d===o)return e()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=e,p.onerror=function(e){var s=e&&e.target&&e.target.src||o,i=new Error("Loading CSS chunk "+t+" failed.\n("+s+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=s,delete n[t],p.parentNode.removeChild(p),a(i)},p.href=o;var h=document.getElementsByTagName("head")[0];h.appendChild(p)})).then((function(){n[t]=0})));var s=o[t];if(0!==s)if(s)e.push(s[2]);else{var i=new Promise((function(e,a){s=o[t]=[e,a]}));e.push(s[2]=i);var l,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=r(t);var u=new Error;l=function(e){d.onerror=d.onload=null,clearTimeout(p);var a=o[t];if(0!==a){if(a){var s=e&&("load"===e.type?"missing":e.type),n=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+s+": "+n+")",u.name="ChunkLoadError",u.type=s,u.request=n,a[1](u)}o[t]=void 0}};var p=setTimeout((function(){l({type:"timeout",target:d})}),12e4);d.onerror=d.onload=l,document.head.appendChild(d)}return Promise.all(e)},c.m=t,c.c=s,c.d=function(t,e,a){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)c.d(a,s,function(e){return t[e]}.bind(null,s));return a},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/hackatum-corona/",c.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],d=l.push.bind(l);l.push=e,l=l.slice();for(var u=0;u<l.length;u++)e(l[u]);var p=d;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},1045:function(t,e,a){},"20db":function(t,e,a){"use strict";var s=a("1045"),n=a.n(s);n.a},"5c0b":function(t,e,a){"use strict";var s=a("7694"),n=a.n(s);n.a},7694:function(t,e,a){},"7ba5":function(t,e,a){},8290:function(t,e,a){},9148:function(t,e,a){"use strict";var s=a("8290"),n=a.n(s);n.a},a078:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));const s={baseApi:"http://88.214.57.7:5000"}},b242:function(t,e,a){"use strict";var s=a("dc3d"),n=a.n(s);n.a},bcd6:function(t,e,a){"use strict";var s=a("7ba5"),n=a.n(s);n.a},cd49:function(t,e,a){"use strict";a.r(e);var s=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("header",{attrs:{id:"nav"}},[a("router-link",{staticClass:"logo",attrs:{to:"/"}},[t._v("SmartQ")]),a("div",{staticClass:"links"},[a("router-link",{attrs:{to:"/"}},[t._v("Home")]),t.isLoggedIn?a("router-link",{attrs:{to:"/shop"}},[t._v("Shop")]):t._e(),t.isLoggedIn?t._e():a("router-link",{attrs:{to:"/login"}},[t._v("Login")]),t.isLoggedIn?a("a",{on:{click:function(e){return t.logout()}}},[t._v("Logout")]):t._e()],1)],1),a("div",{staticClass:"content"},[a("router-view")],1)])},o=[],i={name:"App",data:()=>({isLoggedIn:window.localStorage.getItem("user")}),methods:{logout:function(){window.localStorage.removeItem("user"),this.isLoggedIn=!1,this.$router.push("/login")}}},r=i,c=(a("5c0b"),a("2877")),l=Object(c["a"])(r,n,o,!1,null,null,null),d=l.exports,u=a("9483");Object(u["a"])("/hackatum-corona/service-worker.js",{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var p=a("8c4f"),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("div",{staticClass:"search_input_wrapper"},[a("div",{staticClass:"search_input"},[a("div",{staticClass:"headertext"},[t._v("Search for Shops.")]),a("v-text-field",{attrs:{"single-line":"",label:"Search"},model:{value:t.searchString,callback:function(e){t.searchString=e},expression:"searchString"}}),t.searchString.length>0?a("div",{staticClass:"info-field"},[t._v(" We found "+t._s(t.shownShops.length>0?t.shownShops.length:"no")+" result"+t._s(1===t.shownShops.length?"":"s"))]):t._e(),0===t.searchString.length?a("div",{staticClass:"info-field"},[t._v(" There "+t._s(t.shownShops.length>1?"are":"is")+" "+t._s(t.shownShops.length>0?t.shownShops.length:"no")+" store"+t._s(1===t.shownShops.length?"":"s")+" available")]):t._e()],1)]),a("div",{ref:"map",attrs:{id:"map"}},t._l(t.shownShops,(function(e){return a("maps-marker",{key:e.id,attrs:{lat:e.latitude,lng:e.longitude,onClick:t.onMarkerClick,shop:e,color:e.waitingtime>5?"red":"green"}})})),1)])},g=[],m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div")},f=[],v={name:"MapsMarker",props:["lat","lng","onClick","shop","color"],mounted(){this.$parent.getMap(t=>{this.marker=new window.google.maps.Marker({position:{lat:parseFloat(this.lat),lng:parseFloat(this.lng)},map:t,icon:{url:`http://maps.google.com/mapfiles/ms/icons/${this.color?this.color:"green"}-dot.png`}}),this.marker.addListener("click",()=>{"function"===typeof this.onClick&&this.onClick(this.shop)})})},beforeDestroy(){this.marker.setMap(null),window.google.maps.event.clearInstanceListeners(this.marker)},render(){return null}},w=v,b=Object(c["a"])(w,m,f,!1,null,"d0cd5564",null),_=b.exports,C=a("bc3a"),y=a.n(C),k=a("a078"),x={name:"Home",components:{MapsMarker:_},data:()=>({map:null,searchString:"",shops:[]}),computed:{shownShops:function(){return this.shops.filter(t=>""===this.searchString||(t.name.toLowerCase().includes(this.searchString.toLowerCase())||t.category.toLowerCase().includes(this.searchString.toLowerCase())))}},methods:{onMarkerClick(t){this.$router.push({path:"shopDetail/"+t.id})},getMap(t){const e=this;function a(){e.map?t(e.map):setTimeout(a,200)}a()},loadShops:async()=>y.a.get(k["a"].baseApi+"/shops")},async mounted(){this.map=new window.google.maps.Map(this.$refs.map,{center:{lat:48.1362423,lng:11.5791216},zoom:8,streetViewControl:!1,fullscreenControl:!1,mapTypeControl:!1}),this.shops=(await this.loadShops()).data}},S=x,L=(a("bcd6"),a("6544")),I=a.n(L),$=a("8654"),M=Object(c["a"])(S,h,g,!1,null,"1a65d0f8",null),A=M.exports;I()(M,{VTextField:$["a"]});var j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"infos"},[t.shop?a("div",{class:t.classesForImage(t.shop.category)},[a("v-btn",{staticClass:"ma-2",attrs:{color:"orange darken-2",dark:""},on:{click:function(){return t.$router.go(-1)}}},[a("v-icon",{attrs:{dark:"",left:""}},[t._v("mdi-arrow-left")]),t._v("Back ")],1)],1):t._e(),t.shop?a("div",{staticClass:"store-info"},[a("div",{staticClass:"category"},[t._v(t._s(t.shop.category))]),a("div",{staticClass:"name"},[t._v(t._s(t.shop.name))]),a("div",{staticClass:"address",on:{click:function(e){return t.openInMaps()}}},[t._v(t._s(t.shop.address))])]):t._e(),t.shop?a("div",{staticClass:"waiting"},[a("div",{class:{indicator:1,"indicator-green":t.shop.waiting<7?1:0,"indicator-red":t.shop.waiting<7?0:1}}),a("div",{staticClass:"waiting-text"},[a("div",{staticClass:"waiting-number"},[t._v(" "+t._s(t.shop.waitingtime)+" ")]),a("div",{staticClass:"waiting-label"},[t._v(" Waiting")])])]):t._e(),t.shop?a("div",{staticClass:"cap"},[a("div",{staticClass:"cap-text"},[a("div",{staticClass:"cap-number"},[t._v(" "+t._s(Math.round(100*t.shop.capacity))+" ")]),a("div",{staticClass:"cap-label"},[t._v(" % Capacity ")])]),a("div",{class:{indicator:1,"indicator-green":t.shop.capacity<1?1:0,"indicator-red":t.shop.capacity<1?0:1}})]):t._e(),t.shop?a("div",{staticClass:"chart"},[a("trend",{attrs:{data:t.historyWaiting,gradient:["#b00000","#ffd05c","#00b000"],max:t.shop.maxcapacity,min:t.shop.maxcapacity,"auto-draw":"",smooth:"",strokeWidth:"40px"}}),a("div",[t._v(" Current trend of Waiting People ")])],1):t._e()])},O=[],T=a("da19"),P={name:"ShopDetailPage",data:()=>({shop:null,historyWaiting:[]}),methods:{openInMaps:function(){window.open(`http://www.google.com/maps/place/${this.shop.latitude},${this.shop.longitude}`)},loadShopInfo:async function(){return y.a.get(`${k["a"].baseApi}/shopinfo?id=${this.$route.params.shopID}`)},classesForImage:t=>{const e={image:1};return e["image-"+t]=1,e}},async mounted(){const t=(await this.loadShopInfo()).data;this.shop=t[0],this.historyWaiting=t.map(t=>t.waitingtime).reverse()}},D=P,B=(a("f910"),a("8336")),E=a("132d"),F=Object(c["a"])(D,j,O,!1,null,"432d7da0",null),N=F.exports;I()(F,{VBtn:B["a"],VIcon:E["a"]});var V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"counter-group"},[t.error?a("div",{staticClass:"error"},[t._v(" "+t._s(t.error))]):t._e(),a("div",{staticClass:"count"},[a("div",{staticClass:"number"},[t._v(" "+t._s(t.count)+" ")]),a("div",{staticClass:"waiting"},[t._v(" Waiting ")]),t.cap>0?a("div",{staticClass:"cap"},[t._v(" "+t._s(t.cap)+" % of "+t._s(t.maxCap)+" ")]):t._e(),t.cap<=0?a("div",{staticClass:"cap"},[t._v(" No ")]):t._e(),a("div",{staticClass:"lblcap"},[t._v(" People in the Store ")])]),a("div",{staticClass:"btn-down"},[a("button",{on:{click:function(){return t.onBtnDownClicked()}}},[t._v("-")])]),a("div",{staticClass:"btn-up"},[a("button",{on:{click:function(){return t.onBtnUpClicked()}}},[t._v("+")])])])},W=[],H={name:"Counter",data:()=>({count:0,error:null,cap:.32,maxCap:200}),methods:{changePeopleCount:function(t){return y.a.post(k["a"].baseApi+"/update",{id:parseInt(this.$route.params.shopID),peoplechange:t,userid:parseInt(window.localStorage.getItem("user"))})},onBtnUpClicked:function(){this.changePeopleCount(1).then(()=>this.updateMeasures(!0)).catch(t=>{this.error=t})},onBtnDownClicked:function(){this.cap>0&&this.changePeopleCount(-1).then(()=>this.updateMeasures(!0)).catch(t=>{this.error=t})},updateMeasures:async function(t){const e=await y.a.get(`${k["a"].baseApi}/shopinfo?id=${this.$route.params.shopID}&userid=${window.localStorage.getItem("user")}`);e.data.length&&(this.count=t?e.data[0].waitingtime:this.count,this.cap=(100*e.data[0].capacity).toFixed(2),this.maxCap=e.data[0].maxcapacity)}},async mounted(){this.updateMeasures(!0)}},q=H,R=(a("9148"),Object(c["a"])(q,V,W,!1,null,"4adc1cc0",null)),Q=R.exports,U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"shopHeader"},[a("v-app",{staticClass:"shopHeader"},[a("div",{staticClass:"shopDetails"},[a("center",[a("table",{staticClass:"editList"},[a("tr",[a("th",[t._v("Name")]),a("th",[a("v-text-field",{staticClass:"editText",model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)]),a("tr",[a("th",[t._v("Category")]),a("th",[a("v-select",{staticClass:"editText",attrs:{items:t.categoryItems},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}})],1)]),a("tr",[a("th",[t._v("Address")]),a("th",[a("v-text-field",{staticClass:"editText",model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1)]),a("tr",[a("th",[t._v("Storespace")]),a("th",[a("v-text-field",{staticClass:"editText",model:{value:t.storespace,callback:function(e){t.storespace=e},expression:"storespace"}})],1)]),a("tr",[a("th",[t._v("MaxCapacity")]),a("th",[a("v-text-field",{staticClass:"editText",model:{value:t.maxcapacity,callback:function(e){t.maxcapacity=e},expression:"maxcapacity"}})],1)])])]),a("v-btn",{staticClass:"editButtons",attrs:{fab:"",dark:"",large:"",color:"cyan"},on:{click:t.uploadShop}},[a("v-icon",{attrs:{dark:""}},[t._v("mdi-content-save")])],1)],1)])],1)},G=[],J={data:function(){return{categoryItems:["food","groceries","restaurant"],name:"",category:"",address:"",storespace:0,maxcapacity:0}},methods:{uploadShop(){y.a.post(k["a"].baseApi+"/shopinfo",{name:this.name,category:this.category,address:this.address,storespace:this.storespace,maxcapacity:this.maxcapacity,userid:window.localStorage.getItem("user")}).then(this.$router.push("/shop"))}}},z=J,K=(a("b242"),a("7496")),Y=a("b974"),X=Object(c["a"])(z,U,G,!1,null,"76684bc4",null),Z=X.exports;I()(X,{VApp:K["a"],VBtn:B["a"],VIcon:E["a"],VSelect:Y["a"],VTextField:$["a"]});var tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login"},[t.isLogging?a("div",{staticClass:"login-fields"},[a("h1",[t._v("Login")]),a("br"),a("p",[t._v(" You have a little store and want to be a part of "),a("b",[t._v("SmartQ")]),t._v("? "),a("a",{on:{click:function(e){t.isLogging=!t.isLogging}}},[t._v("Register here!")])]),a("v-text-field",{attrs:{label:"email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{attrs:{"append-icon":t.show1?"mdi-eye":"mdi-eye-off",type:t.show1?"text":"password",counter:"",label:"Password",name:"input-10-1"},on:{"click:append":function(e){t.show1=!t.show1}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("v-btn",{staticClass:"submit-button",attrs:{disabled:t.isBtnDisabled},on:{click:function(e){return t.login()}}},[t._v("Go!")])],1):t._e(),t.isLogging?t._e():a("div",{staticClass:"register-fields"},[a("h1",[t._v("Register")]),a("br"),a("p",[t._v(" Already have an "),a("b",[t._v("SmartQ")]),t._v(" account."),a("br"),t._v(" "),a("a",{on:{click:function(e){t.isLogging=!t.isLogging}}},[t._v("Log in right here.")]),a("br")]),a("v-text-field",{attrs:{label:"name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),a("v-text-field",{attrs:{label:"email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{attrs:{"append-icon":t.show1?"mdi-eye":"mdi-eye-off",type:t.show1?"text":"password",counter:"",label:"Password",name:"input-10-1"},on:{"click:append":function(e){t.show1=!t.show1}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("v-text-field",{attrs:{"append-icon":t.show1?"mdi-eye":"mdi-eye-off",type:t.show1?"text":"password",counter:"",label:"Repeat Password",name:"input-10-1"},on:{"click:append":function(e){t.show1=!t.show1}},model:{value:t.password2,callback:function(e){t.password2=e},expression:"password2"}}),a("v-btn",{staticClass:"submit-button",attrs:{disabled:t.isBtnDisabled},on:{click:function(){return t.register()}}},[t._v("Go!")])],1)])},et=[],at={name:"Login",data:()=>({email:"",isLogging:!0,availableBtn:!1,password:"",password2:"",name:"",firstName:"",show1:!1,rules:{required:t=>!!t||"Required.",emailMatch:()=>"The email and password you entered don't match"}}),computed:{isBtnDisabled:function(){return!(this.password.length>0&&(this.isLogging||this.password===this.password2)&&this.email.length>0)}},methods:{register:async function(){const t=await y.a.post(k["a"].baseApi+"/register",{name:this.name,login:this.email,password:this.password});t&&(this.isLogging=!0)},login:function(){return y.a.post(k["a"].baseApi+"/signin",{login:this.email,password:this.password}).then(t=>{t.data&&(window.localStorage.setItem("user",t.data),this.$parent.isLoggedIn=!0,this.$router.push("/shop"))})}}},st=at,nt=(a("20db"),Object(c["a"])(st,tt,et,!1,null,"7e48ceb7",null)),ot=nt.exports;I()(nt,{VBtn:B["a"],VTextField:$["a"]}),s["a"].use(p["a"]);var it=[{path:"/",name:"Home",component:A},{path:"/shopDetail/:shopID",name:"ShopDetail",component:N},{path:"/counter/:shopID",name:"Counter",component:Q},{path:"/newShop",name:"newShop",component:Z},{path:"/login",name:"Login",component:ot},{path:"/shop",name:"Shop",component:function(){return a.e("about").then(a.bind(null,"0fa5"))}}],rt=new p["a"]({routes:it}),ct=rt,lt=a("2f62");s["a"].use(lt["a"]);var dt=new lt["a"].Store({state:{},mutations:{},actions:{},modules:{}}),ut=a("f309");s["a"].use(ut["a"]),s["a"].use(T["a"]);var pt=new ut["a"]({});s["a"].config.productionTip=!1,new s["a"]({router:ct,store:dt,vuetify:pt,render:function(t){return t(d)}}).$mount("#app")},d35e:function(t,e,a){},dc3d:function(t,e,a){},f910:function(t,e,a){"use strict";var s=a("d35e"),n=a.n(s);n.a}});
//# sourceMappingURL=app.2d8a7dcb.js.map